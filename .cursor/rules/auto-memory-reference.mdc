---
description: Complete reference for all Agent Memory MCP tools and query patterns
globs: []
alwaysApply: false
related_docs: [
  "auto-memory-core.mdc",
  "auto-memory-advanced.mdc",
  "auto-memory-examples.mdc",
  "auto-memory-strategies.mdc"
]
---

@context {
    "type": "reference",
    "purpose": "cursor_rules",
    "format_version": "1.0.0",
    "supported_content_types": [
        "api_docs",
        "reference"
    ]
}

@structure {
    "required_sections": [
        "frontmatter",
        "title",
        "available_tools",
        "query_patterns"
    ]
}

# Agent Memory Tool Reference

Complete reference for all 20 Agent Memory MCP tools. See `@auto-memory-core` for usage workflows.

## Available Memory Tools

The following MCP tools are available via the `agent-memory` server (20 total):

### Scope Management

**memory_org** - Organization management
- Create, list, update organizations
- Multi-project team scenarios

**memory_project** - Project management
- Create, list, update projects
- Link projects to organizations

**memory_session** - Session management
- Start, end, list sessions
- Track work sessions

### Memory Sections

**memory_guideline** - Store and retrieve coding guidelines
- Add, update, list, search guidelines
- Conflict detection and resolution
- Priority and categorization

**memory_knowledge** - Store and retrieve knowledge/decisions
- Add, update, list, search knowledge
- Confidence scoring
- Categories: decision, fact, context, reference

**memory_tool** - Store and retrieve tool definitions
- Add, update, list tools
- Parameter documentation
- Usage examples

### Query & Organization

**memory_query** - Cross-reference search and context aggregation
- Context queries
- Semantic search
- Tag-based filtering
- Multi-type queries

**memory_tag** - Tag management
- Attach, detach, list tags
- Tag-based organization

**memory_relation** - Link related entries
- Create, list, delete relations
- Relation types: applies_to, depends_on, conflicts_with, related_to, parent_task, subtask_of

### Advanced Features

**memory_conversation** - Conversation history tracking
- Start, end, archive conversations
- Add messages
- Link context entries
- Search conversations

**memory_task** - Task decomposition and hierarchy
- Add tasks with subtasks
- Query task hierarchy
- Track task completion

**memory_voting** - Multi-agent voting and consensus
- Record votes
- Get consensus
- Confidence-based decisions

**memory_analytics** - Usage analytics and trends
- Get statistics
- Get trends
- Error correlation analysis

**memory_file_lock** - File locks for multi-agent coordination
- Checkout, checkin locks
- Status checks
- Force unlock

**memory_permission** - Permission management
- Check permissions
- Grant permissions
- Scope-based access control

**memory_conflict** - Conflict detection and resolution
- List conflicts
- Resolve conflicts
- Conflict history

### System Management

**memory_health** - Health check and server status
- Database connectivity
- Cache status
- Table sizes

**memory_init** - Database initialization and migrations
- Check initialization status
- Initialize database
- Run migrations

**memory_export** - Export entries to JSON/Markdown/YAML
- Export by scope
- Multiple formats
- Version control

**memory_import** - Import entries from JSON/YAML/Markdown
- Import from external sources
- Conflict strategies
- Batch imports

## Query Patterns

### Get Full Context

```json
{
  "tool": "memory_query",
  "arguments": {
    "action": "context",
    "scopeType": "project",
    "scopeId": "<project-id>",
    "inherit": true
  }
}
```

### Search by Topic

```json
{
  "tool": "memory_query",
  "arguments": {
    "action": "search",
    "types": ["guidelines", "knowledge"],
    "search": "<topic>",
    "scope": {
      "type": "project",
      "id": "<project-id>",
      "inherit": true
    }
  }
}
```

### Filter by Tags

```json
{
  "tool": "memory_query",
  "arguments": {
    "action": "search",
    "types": ["guidelines"],
    "tags": {
      "require": ["typescript", "error_handling"]
    },
    "scope": {
      "type": "project",
      "id": "<project-id>",
      "inherit": true
    }
  }
}
```

### Semantic Search

```json
{
  "tool": "memory_query",
  "arguments": {
    "action": "search",
    "types": ["guidelines", "knowledge"],
    "search": "<search-query>",
    "semanticSearch": true,
    "semanticThreshold": 0.85,
    "scope": {
      "type": "project",
      "id": "<project-id>",
      "inherit": true
    }
  }
}
```

### Multi-Type Query

```json
{
  "tool": "memory_query",
  "arguments": {
    "action": "search",
    "types": ["guidelines", "knowledge", "tools"],
    "search": "<topic>",
    "scope": {
      "type": "project",
      "id": "<project-id>",
      "inherit": true
    },
    "limit": 20
  }
}
```

### Query with Conversation Linking

```json
{
  "tool": "memory_query",
  "arguments": {
    "action": "search",
    "types": ["guidelines"],
    "conversationId": "<conversation-id>",
    "autoLinkContext": true,
    "scope": {
      "type": "project",
      "id": "<project-id>",
      "inherit": true
    }
  }
}
```

## Common Tool Operations

### Store Guideline

```json
{
  "tool": "memory_guideline",
  "arguments": {
    "action": "add",
    "scopeType": "project",
    "scopeId": "<project-id>",
    "name": "<descriptive-name>",
    "category": "<code_style|security|error_handling|etc>",
    "priority": 80,
    "content": "<the guideline text>",
    "rationale": "<why this guideline exists>",
    "examples": {
      "good": ["<good example>"],
      "bad": ["<bad example>"]
    }
  }
}
```

### Store Knowledge

```json
{
  "tool": "memory_knowledge",
  "arguments": {
    "action": "add",
    "scopeType": "project",
    "scopeId": "<project-id>",
    "title": "<descriptive-title>",
    "category": "<decision|fact|context|reference>",
    "content": "<the knowledge content>",
    "source": "<where this came from>",
    "confidence": 1.0
  }
}
```

### Store Tool

```json
{
  "tool": "memory_tool",
  "arguments": {
    "action": "add",
    "scopeType": "project",
    "scopeId": "<project-id>",
    "name": "<tool-name>",
    "category": "<mcp|cli|function|api>",
    "description": "<what this tool does>",
    "parameters": {
      "<param>": "<description>"
    },
    "examples": ["<usage example>"]
  }
}
```

### Create Relation

```json
{
  "tool": "memory_relation",
  "arguments": {
    "action": "create",
    "sourceType": "guideline",
    "sourceId": "<guideline-id>",
    "targetType": "tool",
    "targetId": "<tool-id>",
    "relationType": "applies_to"
  }
}
```

### Attach Tag

```json
{
  "tool": "memory_tag",
  "arguments": {
    "action": "attach",
    "entryType": "guideline",
    "entryId": "<entry-id>",
    "tagName": "typescript"
  }
}
```

@version "1.0.0"
@last_updated "2024-12-19"
